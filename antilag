-- Carregar a Rayfield Library
local Rayfield = loadstring(game:HttpGet("https://sirius.menu/rayfield"))()

-- Criar a janela com Key System
local Window = Rayfield:CreateWindow({
    Name = "H1ghd1vineðŸ’Ž",
    LoadingTitle = "Starting...",
    LoadingSubtitle = "by Leodok7bom",
    ConfigurationSaving = {
        Enabled = true,
        FolderName = "Sistembly",
        FileName = "Haruno abusado"
    },
    KeySystem = true,
    KeySettings = {
        Title = "Gordo estrupado",
        Subtitle = "Madruga abusadinho",
        Note = "Acesso negado.",
        FileName = "Keygrabber",
        SaveKey = true,
        GrabKeyFromSite = false,
        Key = "suavo99"
    }
})

-- ======================
-- ABAS ORGANIZADAS
-- ======================
local TabAimbot = Window:CreateTab("Aimbot", 4483362458)
local TabHeadsize = Window:CreateTab("Headsizes", 4483362458)
local TabESP = Window:CreateTab("ESP", 4483362458)
local TabUtil = Window:CreateTab("Utilidades", 4483362458)

-- ======================
-- SEÃ‡Ã•ES
-- ======================
local SectionAimbot = TabAimbot:CreateSection("Aimbots")
local SectionHead = TabHeadsize:CreateSection("Scripts de Headsize")
local SectionESP = TabESP:CreateSection("ESP")
local SectionUtil = TabUtil:CreateSection("UtilitÃ¡rios")

-- ======================
-- FUNÃ‡ÃƒO AUXILIAR PARA BOTÃ•ES
-- ======================
local function AddScriptButton(tab, section, name, linkOrFunc, isConfig, iconId)
    tab:CreateButton({
        Name = name,
        Callback = function()
            if typeof(linkOrFunc) == "string" then
                if isConfig then
                    loadstring(game:HttpGet(linkOrFunc))({
                        HideMenu = false,
                        Previous = 0
                    })
                else
                    loadstring(game:HttpGet(linkOrFunc))()
                end
            elseif typeof(linkOrFunc) == "function" then
                linkOrFunc()
            end
        end,
        Icon = iconId or 4483362458
    })
end

-- ======================
-- AIMBOTS
-- ======================
AddScriptButton(TabAimbot, SectionAimbot, "Aimbot Haze", "https://pastebin.com/raw/1qUUGhni", false)

AddScriptButton(TabAimbot, SectionAimbot, "Aimbot FOV", function()
    local Players = game:GetService("Players")
    local LocalPlayer = Players.LocalPlayer
    local RunService = game:GetService("RunService")
    local Workspace = game:GetService("Workspace")
    local PlayerGui = LocalPlayer:WaitForChild("PlayerGui")

    local aimPartName = "Cabesa"
    local fovRadius = 60
    local fovColor = Color3.fromRGB(255, 0, 0)
    local fovThickness = 4
    local fovSize = fovRadius * 2

    if PlayerGui:FindFirstChild("FOVCircle") then
        PlayerGui.FOVCircle:Destroy()
    end

    local screenGui = Instance.new("ScreenGui")
    screenGui.Name = "FOVCircle"
    screenGui.Parent = PlayerGui
    screenGui.ResetOnSpawn = false

    local fovCircle = Instance.new("Frame")
    fovCircle.Name = "FOV"
    fovCircle.Parent = screenGui
    fovCircle.AnchorPoint = Vector2.new(0.5, 0.5)
    fovCircle.Position = UDim2.new(0.5, 0, 0.5, 0)
    fovCircle.Size = UDim2.new(0, fovSize, 0, fovSize)
    fovCircle.BackgroundTransparency = 1
    fovCircle.BorderSizePixel = 0

    local corner = Instance.new("UICorner")
    corner.CornerRadius = UDim.new(1,0)
    corner.Parent = fovCircle

    local stroke = Instance.new("UIStroke")
    stroke.Parent = fovCircle
    stroke.Thickness = fovThickness
    stroke.Color = fovColor
    stroke.ApplyStrokeMode = Enum.ApplyStrokeMode.Border
    stroke.LineJoinMode = Enum.LineJoinMode.Round

    RunService.RenderStepped:Connect(function()
        if fovCircle and fovCircle.Parent then
            fovCircle.Position = UDim2.new(0.5,0,0.5,0)
        end
    end)

    local function canSeeTarget(targetPart)
        local origin = Workspace.CurrentCamera.CFrame.Position
        local direction = (targetPart.Position - origin)
        local raycastParams = RaycastParams.new()
        raycastParams.FilterDescendantsInstances = {LocalPlayer.Character}
        raycastParams.FilterType = Enum.RaycastFilterType.Blacklist

        local raycastResult = Workspace:Raycast(origin, direction, raycastParams)
        if raycastResult then
            return raycastResult.Instance:IsDescendantOf(targetPart.Parent)
        else
            return true
        end
    end

    local function getClosestTarget()
        local closestPart, closestDistance = nil, math.huge
        local camera = Workspace.CurrentCamera
        local screenCenter = Vector2.new(camera.ViewportSize.X/2, camera.ViewportSize.Y/2)

        for _, player in pairs(Players:GetPlayers()) do
            if player ~= LocalPlayer and player.Character and player.Character:FindFirstChild(aimPartName) then
                local humanoid = player.Character:FindFirstChild("Humanoid")
                if humanoid and humanoid.Health > 0 then
                    local part = player.Character[aimPartName]
                    local pos, onScreen = camera:WorldToViewportPoint(part.Position)
                    if onScreen then
                        local dist = (Vector2.new(pos.X, pos.Y) - screenCenter).Magnitude
                        if dist <= fovRadius and canSeeTarget(part) then
                            if dist < closestDistance then
                                closestDistance = dist
                                closestPart = part
                            end
                        end
                    end
                end
            end
        end
        return closestPart
    end

    RunService.RenderStepped:Connect(function()
        local targetPart = getClosestTarget()
        if targetPart then
            local camera = Workspace.CurrentCamera
            camera.CFrame = CFrame.new(camera.CFrame.Position, targetPart.Position)
        end
    end)
end, false)

-- ======================
-- HEADSIZES
-- ======================
AddScriptButton(TabHeadsize, SectionHead, "Headsize Haze PvP", "https://pastebin.com/raw/y0uW2rbb", false)
AddScriptButton(TabHeadsize, SectionHead, "Headsize 1.50 BIB", "https://raw.githubusercontent.com/rlkbgdajogada/headsize/refs/heads/main/1.50", false)

-- ======================
-- ESP
-- ======================
AddScriptButton(TabESP, SectionESP, "ESP", "https://pastebin.com/raw/ttqU8Mca", false)

-- ======================
-- UTILIDADES
-- ======================
AddScriptButton(TabUtil, SectionUtil, "Shiftlock", "https://pastebin.com/raw/zHcrpc1Z", false)
AddScriptButton(TabUtil, SectionUtil, "Antilag Extremo", function()
    local player = game.Players.LocalPlayer
    local lighting = game:GetService("Lighting")
    local runService = game:GetService("RunService")
    local userSettings = UserSettings():GetService("UserGameSettings")
    local workspace = game:GetService("Workspace")

    local function extremeAntiLag()
        lighting.GlobalShadows = false
        for _, effect in pairs(lighting:GetChildren()) do
            if effect:IsA("BloomEffect") or effect:IsA("BlurEffect") or effect:IsA("SunRaysEffect") 
            or effect:IsA("ColorCorrectionEffect") or effect:IsA("DepthOfFieldEffect") then
                effect.Enabled = false
            end
        end
        for _, obj in pairs(workspace:GetDescendants()) do
            if obj:IsA("PointLight") or obj:IsA("SpotLight") or obj:IsA("SurfaceLight") then
                obj.Enabled = false
            elseif obj:IsA("BasePart") then
                obj.CastShadow = false
                if obj.Material ~= Enum.Material.Plastic then
                    obj.Material = Enum.Material.Plastic
                end
            elseif obj:IsA("ParticleEmitter") or obj:IsA("Trail") or obj:IsA("Fire") 
            or obj:IsA("Smoke") or obj:IsA("Sparkles") then
                obj.Enabled = false
            elseif obj:IsA("MeshPart") or obj:IsA("UnionOperation") then
                obj.Material = Enum.Material.Plastic
            elseif obj:IsA("Decal") or obj:IsA("Texture") then
                obj.Transparency = 1
            end
        end
        if player.Character and player.Character:FindFirstChild("Humanoid") then
            for _, part in pairs(player.Character:GetDescendants()) do
                if part:IsA("BasePart") then
                    part.CastShadow = false
                    if part.Material ~= Enum.Material.Plastic then
                        part.Material = Enum.Material.Plastic
                    end
                elseif part:IsA("ParticleEmitter") or part:IsA("Trail") then
                    part.Enabled = false
                end
            end
        end
        userSettings:RequestGraphicsLevel(Enum.GraphicsQualityLevel.Three)
        userSettings:SetScreenshotQuality(Enum.ScreenshotQualityLevel.Three)
    end

    extremeAntiLag()
    runService.RenderStepped:Connect(extremeAntiLag)
    print("AntiLag Extremo Corrigido ativado! GUI, animaÃ§Ãµes e mira preservadas.")
end, false)

AddScriptButton(TabUtil, SectionUtil, "Loopbring", "https://pastebin.com/raw/piEtjvvW", false)
AddScriptButton(TabUtil, SectionUtil, "Time Stop", "https://raw.githubusercontent.com/rlkbgdajogada/Rlkbgdajogada/refs/heads/main/Time%20stop", false)
AddScriptButton(TabUtil, SectionUtil, "BraÃ§Ã£o", "https://pastebin.com/raw/DbVh8zgY", false)
AddScriptButton(TabUtil, SectionUtil, "Autofarm Entregador", "https://raw.githubusercontent.com/Cr4ki3/Flexhub/refs/heads/main/Pizza", false)
AddScriptButton(TabUtil, SectionUtil, "InvisÃ­vel", "https://pastebin.com/raw/nhigiDcU", false)
AddScriptButton(TabUtil, SectionUtil, "MuniÃ§Ã£o Infinita", function()
    local old
    old = hookmetamethod(game, "__index", function(this, index)
        if not checkcaller() and tostring(this) == "CurrentAmmo" and index == "Value" then
            return 2
        end
        return old(this, index)
    end)
end, false)
